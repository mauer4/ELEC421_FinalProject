% Example signal: A simple sine wave with noise
fs = 1000;               % Sampling frequency (Hz)
T = 1 / fs;              % Sampling period (s)
L = 1024;                % Length of signal (must be a power of 2)
t = (0:L-1) * T;         % Time vector

% Generate a signal with two frequency components: 50 Hz and 120 Hz
f1 = 50;                 % First frequency component (Hz)
f2 = 120;                % Second frequency component (Hz)

signal = 0.7 * sin(2 * pi * f1 * t) + sin(2 * pi * f2 * t);

% Add some noise to the signal
noisy_signal = signal + 0.5 * randn(size(t));

% Apply window function (e.g., Hamming window)
windowed_signal = noisy_signal .* hamming(L)';

% Compute FFT using DIF_FFT2
X_dif = DIF_FFT2(windowed_signal) / L;  % Normalize the result

% Compute the frequency axis
f = fs * (0:(L/2)) / L;

% Calculate magnitude spectrum
magnitude = abs(X_dif(1:L/2+1));

% Plot the original signal and its magnitude spectrum
figure;
subplot(2,1,1);
plot(t, windowed_signal);
title('Windowed Noisy Signal');
xlabel('Time (s)');
ylabel('Amplitude');

subplot(2,1,2);
plot(f, magnitude);
title('Magnitude Spectrum of the Signal');
xlabel('Frequency (Hz)');
ylabel('Magnitude');
